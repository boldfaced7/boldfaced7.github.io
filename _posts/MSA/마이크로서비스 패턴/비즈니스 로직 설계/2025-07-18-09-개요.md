---
layout: single
title: "0. 개요"
categories:
  - MSA
  - 마이크로서비스 패턴
  - 비즈니스 로직 설계
tags:
  - MSA
  - 비즈니스로직
  - 객체지향설계
  - DDD
toc: true
toc_sticky: true
---
# 1. 객체지향 설계

- 복잡한 비즈니스 로직 개발에는 객체지향 설계 원칙이 최선
    - 대부분 비즈니스 로직을 JPA 기반 객체지향 도메인 모델을 토대로 개발
    - 일부 절차적인 트랜잭션 스크립트 패턴을 적용할 수도

# 2. MSA에서 비즈니스 로직 개발의 어려움

## 서비스 경계를 넘나드는 객체 레퍼런스

- 도메인 모델은 대부분 상호 연관된 클래스가 뒤얽혀 있음
- MSA에서는 서비스 경계를 넘나드는 객체 레퍼런스를 제거해야

## 데이터 일관성 유지

- MSA 특유의 트랜잭션 관리 제약 조건 하에서도 작동되는 비즈니스 로직을 설계해야
- 여러 서비스에 걸쳐 데이터 일관성을 유지하려면, 사가 패턴을 적용해야

# 3. DDD 애그리거트 패턴

## **1. 애그리거트**

- 한 단위로 취급 가능한 객체를 모아놓은 것

## 2. 애그리거트의 장점



- 서비스 경계를 넘나들 일이 없음
    - 객체 참조 대신 기본키를 사용해 애그리거트가 서로 참조

- 한 트랜잭션으로 하나의 애그리거트만 생성/수정
    - 이는 마이크로서비스 트랜잭션 모델의 제약 조건에 잘 맞음

- 따라서 ACID 트랜잭션은 반드시 하나의 서비스 내부에만 걸리게 됨