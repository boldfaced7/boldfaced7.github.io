---
layout: single
title: "2. 저장소 분리 패턴"
categories:
  - MSA
  - 도메인 주도 설계로 시작하는 마이크로서비스 개발
  - MSA 애플리케이션 패턴
tags:
  - MSA
  - 저장소분리
  - 폴리글랏
  - 데이터일관성
toc: true
toc_sticky: true
---

# 1. 기존 저장소 형태: 저장소 통합

- **저장소 통합**: 모듈은 분리하되, 저장 처리는 다른 모듈에서의 호출을 허용
- 단점 ① **유지보수 어려움**
    - 특정 RDBMS에 구속되고 복잡해져, 유지 보수가 어려워짐
- 단점 ② **성능 최적화 어려움**
    - 성능 문제 발생 시 SQL 구문 튜닝이나 스케일 업에만 의존할 수 있음

# 2. 새로운 저장소 형태: 저장소 분리

- **저장소 분리**: 각 마이크로서비스는 각자의 비즈니스 처리를 위한 데이터를 직접 소유
    
    ![2.37.png](/assets/images/MSA/도메인 주도 설계로 시작하는 마이크로서비스 개발/MSA 애플리케이션 패턴/02-저장소-분리-패턴/2.37.png)
    
- 장점 ① **정보 은닉**
    - 각 서비스는 공개한 API를 통한 접근만 허용
    
- 장점 ② **폴리글랏 저장소**
    - 각 서비스는 저장소를 자율적으로 선택 가능
    
- 장점 ③ **영향도 최소화**
    - 데이터를 통한 변경의 파급 효과를 줄여, 서비스를 독립적으로 만듦
    

# 3. 새로운 문제: 비즈니스 정합성 & 데이터 일관성

- 하지만 저장소 분리 패턴은 비즈니스 정합성, 데이터 일관성 보장 문제가 발생