---
layout: single
title: "1. 문제 이해 및 설계 범위 확정"
categories:
  - Kafka
  - 가상 면접 사례로 배우는 대규모 시스템 설계 기초 2
  - 분산 메시지 큐
tags:
  - Kafka
  - 분산 메시지 큐
toc: true
toc_sticky: true
---
# 1. Q&A

**Q**: 메시지 형태와 평균 크기는?

**A**: 텍스트 형태 메시지만 지원, 크기는 KB 수준

**Q**: 메시지는 반복적으로 소비될 수 있는가?

**A**: Yes, 그러나 부가 기능. 전통적 분산 메시지 큐는 한 소비자가 받아간 메시지는 지워지므로, 전통적 메시지 큐 시스템으로는 불가

**Q**: 메시지는 큐에 전달된 순서로 소비되어야 하는가?

**A**: Yes, 그러나 부가 기능. 전통적 분산 메시지 큐는 소비 순서 보증 불가

**Q**: 데이터 지속성 보장 기간은?

**A**: 2주, 그러나 부가 기능. 전통적 분산 메시지 큐는 지속성 보증이 없음

**Q**: 지원하는 생산자/소비자 수는?

**A**: 다다익선

**Q**: 메시지 전달 방식(’최대 한 번’, ‘최소 한 번’, ‘정확히 한 번’)은?

**A**: 이상적으로는 모두 지원, ‘최소 한 번’은 반드시 지원. 사용자 설정 가능해야

**Q**: 목표 대역폭, end-to-end 지연 시간은?

**A**: 로그 수집 등에 사용할 수 있어야 해, 높은 수준의 대역폭 필요, 전통적 사용법도 지원해야 하니 낮은 지연 전송도 필요

---
# 2. 기능 요구사항

- 생산자는 메시지 큐에 메시지를 보낼 수 있어야
- 소비자는 메시지 큐를 통해 메시지를 수신할 수 있어야
- 메시지 수신 횟수(1번 또는 반복적)를 설정될 수도 있어야
- 오래된 이력 데이터는 삭제될 수 있음
- 메시지 크기는 KB 수준
- 메시지가 생산된 순서대로 소비자에게 전달될 수 있어야
- 메시지 전달 방식은 최소 한 번, 최대 한 번, 정확히 한 번 중에 설정할 수 있어야

---
# 3. 비기능 요구사항

- 높은 대역폭 vs 낮은 전송 지연 중 하나를 설정으로 선택 가능하게 하는 기능
- 규모 확장성 : 분산 시스템인 만큼 메시지 양이 급증해도 처리 가능해야
- 지속성 및 내구성 : 데이터가 디스크에 지속적으로 보관되어야 하며, 여러 노드에 복제되어야

---
# 4. 전통적 메시지 큐와 다른 점

|  | 전통적 메시지 큐 | 이벤트 스트리밍 플랫폼 |
| --- | --- | --- |
| 메시지 보관 | △ | O |
| 메시지 전달 순서 보존 | X | O |
- 전통적 메시지 큐의 메시지 보관
    - 메시지를 소비자에게 전달되기 충분한 기간 동안만 메모리에 보관
    - 처리 용량을 넘어선 메시지를 디스크에 보관하긴 하나, 상대적으로 아주 낮은 수준