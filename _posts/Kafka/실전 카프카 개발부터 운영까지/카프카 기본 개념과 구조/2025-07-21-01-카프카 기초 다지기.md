---
layout: single
title: "1. 카프카 기초 다지기"
categories:
  - Kafka
  - 실전 카프카 개발부터 운영까지
  - 카프카 기본 개념과 구조
tags:
  - Kafka
  - 실전 카프카 개발부터 운영까지
  - 카프카 기본 개념과 구조
toc: true
toc_sticky: true
---
# 1. 리플리케이션

- 각 메시지를 복제해 카프카 클러스터 내 브로커들에 분산시키는 동작
  
    ![20241217_183822.png](/assets/images/Kafka/실전 카프카 개발부터 운영까지/카프카 기본 개념과 구조/01-카프카 기초 다지기/20241217_183822.png)
    
- 리플리케이션 팩터 수 기준
  
    > - 테스트, 개발 환경: 1개
    > - 운영 환경(약간의 유실 허용): 2개
    > - 운영 환경(유실 허용 X): 3개

<br>

# 2. 파티션

- 고성능을 얻기 위해, 하나의 토픽을 여러 개로 나눠 병렬 처리가 가능하게 만든 것
    - 나뉜 파티션 수만큼 컨슈머를 연결할 수 있어, 분산 처리가 가능
    
    ![20241217_183855.png](/assets/images/Kafka/실전 카프카 개발부터 운영까지/카프카 기본 개념과 구조/01-카프카 기초 다지기/20241217_183855.png)

<br>

- 한 번 늘린 파티션 수는 줄일 수 없음
    - 토픽 생성 시 파티션 수를 2, 4 정도로 작게 설정
    - 메시지 처리량, 컨슈머의 LAG 등을 모니터링하며 늘리는 것이 좋음

<br>

# 3. 세그먼트

- 프로듀서가 전송한 실제 메시지가 브로커의 로컬 디스크에 저장된 것
  
    ![20241217_183915.png](/assets/images/Kafka/실전 카프카 개발부터 운영까지/카프카 기본 개념과 구조/01-카프카 기초 다지기/20241217_183915.png)
    

> 1. 프로듀서는 카프카의 `peter-overview01` 토픽으로 메시지를 전송
> 2. `peter-overview01` 토픽은 프로듀서에게 받은 메시지를 파티션 0의 세그먼트 로그 파일에 저장
> 3. 브로커의 세그먼트 로그 파일에 저장된 메시지는 컨슈머가 읽어갈 수 있음
>

![20241217_183935.png](/assets/images/Kafka/실전 카프카 개발부터 운영까지/카프카 기본 개념과 구조/01-카프카 기초 다지기/20241217_183935.png)