---
layout: single
title: "2. 카프카의 핵심 개념"
categories:
  - Kafka
  - 실전 카프카 개발부터 운영까지
  - 카프카 기본 개념과 구조
tags:
  - Kafka
  - 실전 카프카 개발부터 운영까지
  - 카프카 기본 개념과 구조
toc: true
toc_sticky: true
---
# 1. 분산 시스템

- 분산 시스템: 네트워크상에 연결된 컴퓨터들의 그룹으로, 단일 시스템이 갖지 못하는 성능이 목표

  - 한 서버에 장애가 발생할 때 다른 서버가 대신 처리해, 장애 대응이 탁월

  - 부하가 높은 경우 시스템 확장이 용이



- 카프카도 분산 시스템이므로 장애 대응과 확장에 용이
  - 더욱 높은 메시지 처리량이 필요한 경우, 간단히 브로커를 추가해 확장이 가능

<br>

# 2. 페이지 캐시

- OS의 페이지 캐시: 데이터를 디스크에 직접 읽고 쓰는 대신, 메모리를 활용해 캐싱
  - 디스크 I/O 접근이 줄어 성능을 높일 수 있음

<br>

- 카프카는 높은 처리량을 위해 OS의 페이지 캐시를 사용해 데이터를 읽고 씀

![20241217_184002.png](/assets/images/Kafka/실전 카프카 개발부터 운영까지/카프카 기본 개념과 구조/02-카프카의 핵심 개념/20241217_184002.png)

<br>

# 3. 배치 전송 처리

- 카프카를 사용하며 발생하는 통신을 묶어서 처리하면, 네트워크 오버헤드를 줄일 수 있음
- 온라인 상품 구매 프로세스에서 상품의 재고 수량 업데이트 작업은 지연없이 실시간으로 처리되어야
- 하지만 구매 로그를 저장소로 보내는 작업은 로그가 이미 서버에 기록되어 있으므로 배치 처리하는 것이 효율적

<br>

# 4. 압축 전송

- 카프카는 메시지 전송 시 성능이 높은 압축 전송을 사용하는 것을 권장
- 네트워크 대역폭이나 회선 비용등을 줄일 수 있으며, 배치 전송과 결합해 사용한다면 더욱 높은 효과를 얻을 수 있음

<br>

# 5. 토픽, 파티션, 오프셋

## 토픽

- 데이터를 저장하는 곳으로, 메일 전송 시스템에서 이메일 주소 정도의 개념



## 파티션

- 토픽의 병렬 처리를 위해 토픽을 나눈 것



## 오프셋

- 파티션에 메시지가 저장되는 위치
- 오프셋을 통해 오프셋을 통해 메시지의 순서를 보장하고, 마지막까지 읽은 위치를 파악

![20241217_184018.png](/assets/images/Kafka/실전 카프카 개발부터 운영까지/카프카 기본 개념과 구조/02-카프카의 핵심 개념/20241217_184018.png)

<br>

# 6. 고가용성 보장

- 카프카는 토픽의 파티션을 복제하는 리플리케이션 기능을 제공해 고가용성을 보장
- 원본과 리플리케이션 각각을 리더와 팔로워로 부름
  - 리플리케이션 팩터 수가 3이면, 리더는 1개, 팔로워는 2개