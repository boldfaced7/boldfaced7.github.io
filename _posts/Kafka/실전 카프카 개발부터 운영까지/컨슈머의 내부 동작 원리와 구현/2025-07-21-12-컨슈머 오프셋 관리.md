---
layout: single
title: "1. 컨슈머 오프셋 관리"
categories:
  - Kafka
  - 실전 카프카 개발부터 운영까지
  - 컨슈머의 내부 동작 원리와 구현
tags:
  - Kafka
  - 실전 카프카 개발부터 운영까지
  - 컨슈머의 내부 동작 원리와 구현
toc: true
toc_sticky: true
---
# 오프셋이란?

- 메세지의 위치를 숫자 형태로 나타낸 것
- 컨슈머가 메시지를 어디까지 가져왔는지를 표시해야, 빠른 복구가 가능

# 오프셋 관리

- `__consumer_offsets` 토픽에 컨슈머 그룹별 오프셋 위치 정보가 기록됨
- `__consumer_offsets` 토픽 기본 설정
    
    ```java
    offsets.topic.num.partitions=50
    offsets.topic.replication.factor=3
    ```
    

# 동작

- `__consumer_offsets`에 컨슈머가 **다음으로 읽어야 할 위치**를 기록

![20241217_192612.png](/assets/images/Kafka/실전 카프카 개발부터 운영까지/컨슈머의 내부 동작 원리와 구현/12-컨슈머 오프셋 관리/20241217_192612.png)

1. 2번 오프셋 메시지 C까지 읽음
2. 3번 오프셋 위치를 `__consumer_offsets`에 저장
</aside>